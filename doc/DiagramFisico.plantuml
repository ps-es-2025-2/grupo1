@startuml
!theme plain
!pragma layout smetana
left to right direction

skinparam nodesep 70
skinparam ranksep 90
skinparam shadowing false
skinparam backgroundColor #FEFEFE
skinparam dpi 300

node "Cliente Passageiro\n(Desktop JavaFX)" as C1 {
    [JavaFX UI]
    artifact "vagasvan-cliente.jar"
}
node "Cliente Motorista\n(Desktop JavaFX)" as C2 {
    [JavaFX UI]
    artifact "vagasvan-cliente.jar"
}

node "Servidor de Aplicação\n(Java Backend)" as AppServer {
    [Spring Boot]
    folder "Domain" #lightblue {
        [Entidades]
        [Value Objects]
        [Regras de Negócio]
    }
    folder "Application" #lightgreen {
        [Use Cases]
        [DTOs]
    }
    folder "Infrastructure" #lightyellow {
        [Repositórios JPA]
        [NotificationService]
        [GeolocationService]
    }
    artifact "appvagasvan.jar"
}

node "Banco de Dados" as DB {
    database "PostgreSQL"
}

cloud "Firebase Cloud Messaging\n(FCM)" as FCM {
}
cloud "Google Maps Platform\n(Directions + Distance Matrix)" as GMaps {
}

C1 --> AppServer : HTTPS POST /confirmar\nJWT + JSON
C2 --> AppServer : HTTPS GET /turnos
AppServer --> DB : JDBC 5432 (VPC)

AppServer --> FCM : HTTPS POST\nfcm.googleapis.com/v1/...\nBearer <token>
AppServer --> GMaps : HTTPS GET\nmaps.googleapis.com/v1/...\nkey=AIza...

cloud "AWS Cloud" {
    node "EC2 t3.medium" as EC2
    node "RDS PostgreSQL" as RDS
}
AppServer ..> EC2 : roda em
DB ..> RDS : roda em

legend bottom
  **Fluxos**
  ←→  HTTPS/REST (clientes ↔ backend)  
  →   HTTPS outbound (backend → SaaS)  
  ──  JDBC interno  
  **Camadas DDD**  
  <#lightblue> Domain <#lightgreen> Application <#lightyellow> Infrastructure
end legend

@enduml